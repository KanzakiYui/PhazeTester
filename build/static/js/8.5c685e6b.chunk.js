(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{119:function(e,t){},120:function(e,t){},123:function(e,t){},124:function(e,t){},129:function(e,t){},473:function(e,t,n){},475:function(e,t,n){},625:function(e,t,n){"use strict";n.r(t);var a=n(227),r=n.n(a),o=n(228),c=n(9),i=n(10),u=n(12),s=n(11),l=n(13),d=n(0),m=n.n(d),f=(n(473),n(475),n(16)),h=n.n(f);var p=function(e){return m.a.createElement("div",{className:"CustomLoader"},m.a.createElement("span",{style:{color:e.color}},e.message),m.a.createElement(h.a,{type:e.type,color:e.color,height:"25",width:"25"}))},b=n(89),E=n(6),v=n(5),S=n.n(v),C={CA:"CAD",US:"USD"},y={CAD:"Canada",USD:"United States"},g=n(628),w=n(626),k=n(618),x=n(14),N=n.n(x),j=S()({loader:function(){return n.e(23).then(n.bind(null,622))},loading:E.a,delay:1e3,render:function(e,t){var n=e.default;return m.a.createElement(n,t)}}),A=S()({loader:function(){return n.e(24).then(n.bind(null,623))},loading:E.a,delay:1e3,render:function(e,t){var n=e.default;return m.a.createElement(n,t)}}),O=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this,e))).UserCheck=Object(o.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Object(b.a)().then(function(e){return console.log(e),e.type?"EMAIL_VERIFIED"===e.type?n.setState({username:e.username,emailVerified:!0},n.GetPromo):"VERIFIED_CA"===e.type?n.setState({username:e.username,emailVerified:!0,kycVerified:!0,kycCountry:"Canada"},n.GetPromo):"VERIFIED_US"===e.type&&n.setState({username:e.username,emailVerified:!0,kycVerified:!0,kycCountry:"United States"},n.GetPromo):n.setState({showContent:!0,username:e.username}),null}).catch(n.Logout);case 1:case"end":return e.stop()}},e,this)})),n.GetPromo=function(){Object(b.b)("users/list_coupons").then(function(e){return n.setState({promoInfo:function(e){var t=e.result[0];return t?{amount:t.amount/100,code:t.code,rate:Number(t.discount)}:{amount:0,code:null,rate:0}}(e)},n.GetBrands),null}).catch(n.Logout)},n.GetBrands=function(){Object(b.b)("merchant/list_brands/country/ALL").then(function(e){return n.setState({brandInfo:function(e){var t=e.map(function(e){var t=y[C[e.country]];if(-1!==e.denominations.indexOf("-")){var n=Number(e.denominations.split("-").shift())/100,a=Number(e.denominations.split("-").pop())/100;return{index:e.index,code:e.internal_id,name:e.brand_name,country:t,min:n,max:a}}var r=e.denominations.split(" ").map(function(e){return Number(e)/100});return{index:e.index,code:e.internal_id,name:e.brand_name,country:t,array:r}});return t.sort(function(e,t){return e.index-t.index}),t}(e),showContent:!0}),null}).catch(n.Logout)},n.Logout=function(){Object(b.b)("public/logout").then(function(){return n.props.history.push("/"),null}).catch(function(){})},n.SelectBrand=function(e){console.log(e)},n.state={location:"shop",menuActive:!1,username:null,emailVerified:!1,kycVerified:!1,kycCountry:null,promoInfo:null,brandInfo:null,showContent:!1,openSearch:!1},n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.UserCheck(),window.scrollTo({top:0,left:0,behavior:"smooth"})}},{key:"render",value:function(){var e=this;if(!this.state.showContent)return m.a.createElement(p,{type:"Oval",message:"Loading Data",color:"var(--color-red-normal)"});if(!this.state.emailVerified)return m.a.createElement(j,{Logout:this.Logout});var t=null,n=this.state.menuActive?"Active":"";return"shop"===this.state.location&&(t=m.a.createElement(m.a.Fragment,null,m.a.createElement(g.a,{exact:!0,to:"/dashboard/",activeClassName:"Actived"},m.a.createElement("i",{className:"fas fa-th-large"})),m.a.createElement(g.a,{exact:!0,to:"/dashboard/map",activeClassName:"Actived"},m.a.createElement("i",{className:"fas fa-map-marker-alt"})),m.a.createElement("i",{className:"fas fa-search",onClick:function(){return e.setState({openSearch:!0})}}))),m.a.createElement("div",{id:"Dashboard"},m.a.createElement("div",{id:"Dashboard-Menu"},m.a.createElement("div",{className:"Bar"},m.a.createElement("div",{className:"Controller"},m.a.createElement("i",{className:"fas fa-bars",onClick:function(){return e.setState(function(e){return{menuActive:!e.menuActive}})}}),m.a.createElement("span",null,this.state.location)),m.a.createElement("div",{className:"SubMenu"},t),m.a.createElement("img",{src:N.a,alt:""})),m.a.createElement("div",{className:"Panel "+n},m.a.createElement(g.a,{exact:!0,to:"/dashboard",onClick:function(){return e.setState({location:"shop"})}},"Shop"),m.a.createElement(g.a,{exact:!0,to:"/dashboard/wallet",onClick:function(){return e.setState({location:"wallet"})}},"Wallet"),m.a.createElement(g.a,{exact:!0,to:"/dashboard/account",onClick:function(){return e.setState({location:"account"})}},"Account"))),m.a.createElement(w.a,null,m.a.createElement(k.a,{exact:!0,path:"/dashboard",render:function(t){return m.a.createElement(A,Object.assign({},t,{brandInfo:e.state.brandInfo,openSearch:e.state.openSearch,CloseSearch:function(){return e.setState({openSearch:!1})},Select:e.SelectBrand}))}}),m.a.createElement(k.a,{exact:!0,path:"/dashboard/map",render:function(e){return m.a.createElement(A,e)}})))}}]),t}(m.a.Component);t.default=O},89:function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"c",function(){return i}),n.d(t,"a",function(){return u});var a=n(114),r=n.n(a),o="https://webstaging.phaze.io/api/";function c(e){return r()({method:"GET",url:o+e,json:!0,withCredentials:!0})}function i(e,t){return r()({method:"POST",url:o+e,body:t,json:!0,withCredentials:!0})}function u(){return r()({method:"GET",url:o+"users/check_auth",json:!0,withCredentials:!0})}}}]);
//# sourceMappingURL=8.5c685e6b.chunk.js.map