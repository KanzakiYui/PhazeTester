(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{231:function(e,t,a){"use strict";a.d(t,"c",function(){return o}),a.d(t,"a",function(){return l}),a.d(t,"b",function(){return c}),a.d(t,"d",function(){return i});var n=a(0),r=a.n(n);function o(e){var t=(e=Math.max(0,Number(e)).toFixed(2)).split(".")[0],a=e.split(".")[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("i",null,t),".",a)}function l(e){var t=(e=Math.max(0,Number(e)).toFixed(8)).split(".")[0],a=e.split(".")[1];return r.a.createElement(r.a.Fragment,null,t,".",r.a.createElement("i",null,a))}var s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function c(e){var t=new Date(e),a=s[t.getMonth()]+" "+t.getDate()+", ",n=t.getFullYear();return r.a.createElement(r.a.Fragment,null,r.a.createElement("i",null,a),n)}function i(e){var t=new Date(e);return t.getHours().toString().padStart(2,"0")+":"+t.getMinutes().toString().padStart(2,"0")+":"+t.getSeconds().toString().padStart(2,"0")}},373:function(e,t,a){e.exports=a.p+"static/media/Credit.9cc4474a.png"},636:function(e,t,a){},638:function(e,t,a){},661:function(e,t,a){var n={"./Bitcoin.png":[680,30],"./Credit.png":[373],"./Ethereum.png":[681,31],"./Litecoin.png":[682,32]};function r(e){var t=n[e];return t?Promise.all(t.slice(1).map(a.e)).then(function(){var e=t[0];return a.t(e,7)}):Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}r.keys=function(){return Object.keys(n)},r.id=661,e.exports=r},696:function(e,t,a){"use strict";a.r(t);var n=a(366),r=a.n(n),o=a(683),l=a(367),s=a(50),c=a(51),i=a(53),u=a(52),p=a(54),m=a(0),d=a.n(m),h=(a(636),a(247)),f=a(188),y=a(203),E=a(232),b=a.n(E),v=(a(638),a(231)),C=a(640),g=a.n(C),w=a(373),k=a.n(w),F=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).Copy=function(){clearInterval(a.copyTooltipTimer);try{var e=document.createElement("textarea");e.value=a.state.address,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),a.setState({showCopyTooltip:!0},function(){return a.copyTooltipTimer=setTimeout(function(){return a.setState({showCopyTooltip:!1})},3e3)})}catch(t){console.log(t)}},a.qrRef=d.a.createRef(),a.copyTooltipTimer=null,a.state={url:null,address:null,showCopyTooltip:!1},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;1!==this.props.type&&(a(661)("./"+this.props.category+".png").then(function(t){return e.setState({url:t.default})}).catch(function(){}),this.props.kycVerified&&Object(f.b)("crypto/get_address/crypto/"+y.d[this.props.category]).then(function(t){return e.setState({address:t},function(){g.a.toCanvas(e.qrRef.current,e.state.address,{errorCorrectionLevel:"H",margin:1,color:{light:"#ffffff00",dark:"#000000"}},function(e){e&&console.log(e)})})}).catch(function(){}))}},{key:"componentWillUnmount",value:function(){clearInterval(this.copyTooltipTimer)}},{key:"render",value:function(){var e=y.d[this.props.category],t=this.props.kycVerified?d.a.createElement(d.a.Fragment,null,d.a.createElement("canvas",{ref:this.qrRef}),d.a.createElement("button",{className:"button-1",onClick:this.Copy},"Copy Address"),this.state.showCopyTooltip?d.a.createElement("div",{className:"Tooltip"},d.a.createElement("p",null,"Copied!"),d.a.createElement("div",{className:"Arrow"})):null):d.a.createElement(d.a.Fragment,null,d.a.createElement("p",{className:"NeedKYC"},"Verify Your Identity Before Deposit"),d.a.createElement("button",{className:"button-1",onClick:this.props.GotoKYC},"Do it Now"));switch(this.props.type){case 0:return d.a.createElement("div",{className:"CryptoCard "+this.props.category},d.a.createElement("div",null,t),d.a.createElement("div",null,d.a.createElement("div",{className:"LOGO"},d.a.createElement("img",{src:this.state.url,alt:""}),d.a.createElement("p",null,this.props.category)),d.a.createElement("div",{className:"Info"},d.a.createElement("p",null,Object(v.a)(this.props.info.balance),d.a.createElement("span",null,e)),d.a.createElement("p",null,"$ ",Object(v.c)(this.props.info.value),d.a.createElement("span",null,this.props.currency)),d.a.createElement("p",null,Object(v.c)(this.props.info.rate)," ",d.a.createElement("span",null,this.props.currency,"/",e)))),d.a.createElement("div",{className:"Arrow"}));case 1:return d.a.createElement("div",{className:"CreditCard"},d.a.createElement("div",null,d.a.createElement("p",null,"PHAZE"),d.a.createElement("img",{src:k.a,alt:""}),d.a.createElement("p",null,"Credit")),d.a.createElement("div",null,d.a.createElement("p",null,d.a.createElement("i",{className:"fas fa-coins"}),"Balance"),d.a.createElement("p",null,"$ ",Object(v.c)(this.props.info.amount))),d.a.createElement("div",null,d.a.createElement("p",null,d.a.createElement("i",{className:"fas fa-gift"}),"Applicable Rate"),d.a.createElement("p",null,100*this.props.info.rate," %")),d.a.createElement("div",null,d.a.createElement("p",null,d.a.createElement("i",{className:"fas fa-barcode"}),"Promo Code"),d.a.createElement("p",null,this.props.info.code)));default:return null}}}]),t}(d.a.Component),x=a(24),I=a(190),N=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).FetchAllBalance=function(){Object(f.b)("users/list_balance/crypto/ALL").then(function(e){return a.FetchAllRate(e.result),null}).catch(function(){return a.props.history.push("/dashboard")})},a.FetchAllRate=function(){var e=Object(l.a)(r.a.mark(function e(t){var n,l,s,c,i,u;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=y.a[y.b[a.props.paymentInfo.name.country]],e.next=3,Promise.all([Object(f.c)("https://api.coinbase.com/v2/prices/BTC-"+n+"/sell"),Object(f.c)("https://api.coinbase.com/v2/prices/LTC-"+n+"/sell"),Object(f.c)("https://api.coinbase.com/v2/prices/ETH-"+n+"/sell")]);case 3:l=e.sent,s=Object(o.a)(l,3),c=s[0],i=s[1],u=s[2],c=Number(c.data.amount).toFixed(2),i=Number(i.data.amount).toFixed(2),u=Number(u.data.amount).toFixed(2),a.setState({walletInfo:[{name:"Bitcoin",balance:t.btc_balance,rate:c,value:(Number(t.btc_balance)*Number(c)).toFixed(2)},{name:"Litecoin",balance:t.ltc_balance,rate:i,value:(Number(t.ltc_balance)*Number(i)).toFixed(2)},{name:"Ethereum",balance:t.eth_balance,rate:u,value:(Number(t.eth_balance)*Number(u)).toFixed(2)}],showContent:!0});case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.ChangedWallet=function(e){a.setState({currentWalletIndex:e})},a.Pay=function(){a.setState({status:1},function(){var e={brand:a.props.paymentInfo.name.code,price:100*a.props.paymentInfo.value,currency:y.a[y.b[a.props.paymentInfo.name.country]]};Math.abs(a.props.paymentInfo.subtotal-0)>.01?e.crypto=y.d[a.state.walletInfo[a.state.currentWalletIndex].name]:e.crypto="CREDIT",a.props.paymentInfo.useCredit&&(e.discount_code=a.props.promoInfo.code),Object(f.d)("merchant/purchase",e).then(function(e){return a.setState({errorMessage:null,status:3,successInfo:e},a.AfterPayUpdate),null}).catch(function(e){401===e.statusCode?a.props.history.push("/"):a.setState({status:2,messageOpen:!0,errorMessage:400===e.statusCode?"Your Wallet Balance Is Insufficient":"Internal Errors Happen"})})})},a.AfterPayUpdate=function(){a.props.updateAfterPay(),a.FetchAllBalance()},a.state={walletInfo:null,showContent:!1,currentWalletIndex:1,status:0,messageOpen:!1,errorMessage:null,successInfo:null},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.paymentInfo?(x.a.has(document.body)?x.a.get(document.body).scrollTo(0,0,500):window.scrollTo(0,0),this.FetchAllBalance()):this.props.history.push("/dashboard")}},{key:"render",value:function(){var e=this;if(!this.state.showContent)return d.a.createElement(h.a,{type:"Audio",message:"Loading Data",color:"var(--color-red-dark)"});var t=null;if(0===this.state.status?t=d.a.createElement("div",{id:"Checkout-Confirm"},d.a.createElement("button",{onClick:this.Pay},"Confirm to Purchase")):1===this.state.status?t=d.a.createElement("div",{id:"Checkout-Processing"},d.a.createElement(h.a,{type:"Watch",message:"Processing",color:"var(--color-cyan-light)"})):2===this.state.status?t=d.a.createElement("div",{id:"Checkout-Retry"},d.a.createElement("button",{onClick:this.Pay},"Retry to Purchase")):3===this.state.status&&(t=d.a.createElement("div",{id:"Checkout-Success"},d.a.createElement(S,{info:this.state.successInfo,brandCode:this.props.paymentInfo.name.code}),d.a.createElement(T,{info:this.state.successInfo,brand:this.props.paymentInfo.name.code,value:this.props.paymentInfo.value,subtotal:this.props.paymentInfo.subtotal}),d.a.createElement("p",{className:"Goback",onClick:this.props.history.goBack},d.a.createElement("i",{className:"fas fa-sign-out-alt"}),"Go Back"))),Math.abs(this.props.paymentInfo.subtotal-0)<.01&&this.props.paymentInfo.useCredit)return d.a.createElement("div",{id:"Checkout"},d.a.createElement("p",{id:"Checkout-Cancel",onClick:function(){return e.props.history.push("/dashboard")}},d.a.createElement("i",{className:"fas fa-times"}),"Cancel Payment"),d.a.createElement("div",{id:"Checkout-CreditCard"},d.a.createElement(F,{type:1,info:this.props.promoInfo})),d.a.createElement("div",{id:"Checkout-Flow"},d.a.createElement("div",{className:"Flow-1"},d.a.createElement("p",null,"Your ",d.a.createElement("span",null,(1.02*this.props.paymentInfo.value).toFixed(2))," credit")),d.a.createElement("div",{className:"Flow"},d.a.createElement("i",{className:"fas fa-long-arrow-alt-down"}),d.a.createElement("p",null,"Will be magically converted to")),d.a.createElement("div",{className:"Flow-2"},d.a.createElement("p",null,"$ ",d.a.createElement("span",null,this.props.paymentInfo.value)," gift card (plus transaction fee) "),d.a.createElement("p",null,d.a.createElement("span",null,this.props.paymentInfo.name.name)," (",this.props.paymentInfo.name.country,")"))),d.a.createElement("div",{id:"Checkout-Status"},t),d.a.createElement(I.a,{open:this.state.messageOpen,type:"error",buttonText:"Close",content:this.state.errorMessage,close:function(){return e.setState({messageOpen:!1})}}));var a={centerMode:!0,centerPadding:this.props.screenWidth<360?"7.5%":this.props.screenWidth<576?"8%":this.props.screenWidth<672?"9%":this.props.screenWidth<768?"10%":"15%",dots:!1,infinite:!1,initialSlide:this.state.currentWalletIndex,arrows:!1,speed:500,slidesToShow:1,swipe:0===this.state.status||2===this.state.status,swipeToSlide:0===this.state.status||2===this.state.status,afterChange:this.ChangedWallet},n=y.a[y.b[this.props.paymentInfo.name.country]],r=this.state.walletInfo[this.state.currentWalletIndex],o=r.rate,l=(Number(this.props.paymentInfo.subtotal)/Number(o)).toFixed(8),s=y.d[r.name],c=(1.02*this.props.paymentInfo.value-this.props.paymentInfo.subtotal).toFixed(2);return d.a.createElement("div",{id:"Checkout"},d.a.createElement("p",{id:"Checkout-Cancel",onClick:function(){return e.props.history.push("/dashboard")}},d.a.createElement("i",{className:"fas fa-times"}),"Cancel Payment"),d.a.createElement("div",{id:"Checkout-Wallets"},d.a.createElement(b.a,a,d.a.createElement(F,{type:0,category:this.state.walletInfo[0].name,info:this.state.walletInfo[0],currency:n,kycVerified:this.props.kycVerified,GotoKYC:function(){return e.props.history.push("/dashboard/identity")}}),d.a.createElement(F,{type:0,category:this.state.walletInfo[1].name,info:this.state.walletInfo[1],currency:n,kycVerified:this.props.kycVerified,GotoKYC:function(){return e.props.history.push("/dashboard/identity")}}),d.a.createElement(F,{type:0,category:this.state.walletInfo[2].name,info:this.state.walletInfo[2],currency:n,kycVerified:this.props.kycVerified,GotoKYC:function(){return e.props.history.push("/dashboard/identity")}}))),d.a.createElement("div",{id:"Checkout-Flow"},d.a.createElement("div",{className:"Flow-1"},d.a.createElement("p",null,"Your ",d.a.createElement("span",null,l)," ",d.a.createElement("span",null,s)," from wallet")),d.a.createElement("div",{className:"Flow"},d.a.createElement("i",{className:"fas fa-long-arrow-alt-down"}),d.a.createElement("p",null,"Will be magically converted to")),d.a.createElement("div",{className:"Flow-2"},d.a.createElement("p",null,"$ ",d.a.createElement("span",null,this.props.paymentInfo.value)," gift card (",d.a.createElement("span",null,c)," Phaze Credit) "),d.a.createElement("p",null,d.a.createElement("span",null,this.props.paymentInfo.name.name)," (",this.props.paymentInfo.name.country,")"))),d.a.createElement("div",{id:"Checkout-Status"},t),d.a.createElement(I.a,{open:this.state.messageOpen,type:"error",buttonText:"Close",content:this.state.errorMessage,close:function(){return e.setState({messageOpen:!1})}}))}}]),t}(d.a.Component);t.default=N;function S(e){if(e.info.link)return d.a.createElement(d.a.Fragment,null,d.a.createElement("p",{className:"Title"},"Thanks For Your Purchase"),d.a.createElement("a",{href:e.info.link,target:"_blank",rel:"noopener noreferrer"},"Gift Card Link"),d.a.createElement("p",{className:"Notice"},"Click above link to view gift card info"));var t=null;return e.brandCode.indexOf("amazonca")&&(t="https://www.amazon.ca/gc/redeem?code="+e.info.code),d.a.createElement(d.a.Fragment,null,d.a.createElement("p",{className:"Title"},"Thanks For Your Purchase"),d.a.createElement("p",{className:"Code"},d.a.createElement("span",null,e.info.code),"(CODE)"),e.info.pin?d.a.createElement("p",{className:"PIN"},d.a.createElement("span",null,e.info.pin),"(PIN)"):null,d.a.createElement("a",{className:"AutoFill",href:t,target:"_blank",rel:"noopener noreferrer"},"Auto Redeem Link"),d.a.createElement("p",{className:"Notice"},"You can use above link to auto-redeem"))}function T(e){var t=e.brand,a="$"+e.value.toFixed(2),n="$"+(.02*e.value).toFixed(2),r="$"+(1.02*e.value).toFixed(2),o="$"+e.subtotal.toFixed(2),l="$"+(1.02*e.value-e.subtotal).toFixed(2);return d.a.createElement("button",{className:"button-2",onClick:function(){var s=new window.jsPDF,c=s.internal.pageSize.getWidth(),i=c-30;if(s.setFont("arial"),s.setFontStyle("bold"),s.setFontSize(24),s.setTextColor(19,127,134),s.text("Phaze Receipt",c/2,20,"center"),s.setFontSize(16),s.setTextColor(58,61,70),s.setFontStyle("bold"),s.text("Gift Card Brand",30,40),s.setFontStyle("normal"),s.text(t,i,40,"right"),s.setFontStyle("bold"),s.text("Gift Card Value",30,50),s.setFontStyle("normal"),s.text(a,i,50,"right"),s.setFontStyle("bold"),s.text("Transaction Fee",30,60),s.setFontStyle("normal"),s.text(n,i,60,"right"),s.setFontStyle("bold"),s.text("Subtotal",30,70),s.setFontStyle("normal"),s.text(r,i,70,"right"),s.line(30,80,i,80),s.setFontStyle("bold"),s.text("Credit Applied",30,90),s.setFontStyle("normal"),s.setTextColor(29,165,175),s.text(l,i,90,"right"),s.setTextColor(58,61,70),s.line(30,100,i,100),s.setTextColor(245,13,71),s.setFontStyle("bold"),s.text("Grand Total",30,110),s.setFontStyle("normal"),s.text(o,i,110,"right"),s.setTextColor(58,61,70),s.line(30,120,i,120),s.setFontSize(20),s.setTextColor(21,61,232),s.setFontStyle("bold"),e.info.link){var u=(c-s.getTextWidth("Gift Card Link"))/2;s.textWithLink("Gift Card Link",u,130,{url:e.info.link})}else s.text(e.info.code,c/2,130,"center"),e.info.pin&&s.text(e.info.pin,c/2,140,"center");var p=s.output("dataurl");window.postMessage(p),window.open(p,"_blank")}},"Download Receipt")}}}]);
//# sourceMappingURL=11.0c9ba1c2.chunk.js.map